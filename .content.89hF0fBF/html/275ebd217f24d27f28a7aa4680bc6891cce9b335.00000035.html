<!DOCTYPE html>
<html lang="en">
<head>
  <title>Scheduler</title>
  <meta charset="utf-8">
  <meta name="description" content="AEM Interview Questions">
  <meta name="keywords" content="Schedular in AEM, methods present in scheduler api">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1828962054294466",
    enable_page_level_ads: true
  });
  </script>
  <link rel="stylesheet" href="code/style.css">
</head>
<body>
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="index.html">AEM Interview Questions</a> <a class="navbar-brand" href="#" id="heading">&gt; scheduler</a>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li>Schedular</li>
          <li>
            <a href="index.html">Aem Introduction</a>
          </li>
          <li>
            <a href="osgi.html">OSGI</a>
          </li>
          <li>
            <a href="sling.html">Sling</a>
          </li>
          <li>
            <a href="repository.html">Repository</a>
          </li>
          <li>
            <a href="component.html">Component & Template</a>
          </li>
          <li>
            <a href="sightly.html">Sightly</a>
          </li>
          <li>
            <a href="servlet.html">Servlet</a>
          </li>
          <li>
            <a href="service.html">Service</a>
          </li>
          <li>
            <a href="clientlibs.html">Client Library</a>
          </li>
          <li>
            <a href="workflow.html">Workflow</a>
          </li>
          <li>
            <a href="eventhandling.html">EventHandling</a>
          </li>
          <li>
            <a href="multi-site_manager.html">Multisite Management</a>
          </li>
          <li>
            <a href="dispatcher.html">Dispatcher</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container-fluid text-center">
    <div class="row content">
      <div class="col-sm-2 sidenav">
        <div class="scroll-sidebar">
          <p>Schedular</p>
          <p><a href="index.html">Aem Introduction
          <p></p>
          <p></p></a><a href="osgi.html">OSGI</a></p>
          <p><a href="sling.html">Sling</a></p>
          <p><a href="repository.html">Repository</a></p>
          <p><a href="component.html">Component & Template</a></p>
          <p><a href="sightly.html">Sightly</a></p>
          <p><a href="servlet.html">Servlet</a></p>
          <p><a href="service.html">Service</a></p>
          <p><a href="clientlibs.html">Client Library</a></p>
          <p><a href="workflow.html">Workflow</a></p>
          <p><a href="eventhandling.html">EventHandling</a></p>
          <p><a href="multi-site_manager.html">Multisite Management</a></p>
          <p><a href="dispatcher.html">Dispatcher</a></p>
        </div>
      </div>
      <div class="col-sm-8 text-left">
        <h1>Scheduler</h1>
        <p>The scheduler is a service for scheduling other services/jobs (it uses the open source Quartz library). The scheduler can be used in two ways, by registering the job through the scheduler API and by leveraging the whiteboard pattern that is supported by the scheduler.<br>
        more</p><br>
        For cron expression check this link
      </div>
      <div class="col-sm-8 text-left">
        <h2>Interview Questions</h2>
        <p><strong>Note:</strong> To create a <strong>scheduler</strong> click this link</p>
        <div class="panel-group" id="accordion">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse1">1. How to write scheduler by leveraging the whiteboard pattern?</a></h4>
            </div>
            <div id="collapse1" class="panel-collapse collapse">
              <div class="panel-body">
                <p></p>
                <h5><b>Exampes of Jobs that are scheduled by leveraging the whiteboard pattern:</b></h5><br>
                Scheduling with a cron expression - The following job is executed every minute by setting scheduler.expression to the cron expression "0 * * ?":
                <p></p>
                <div class="alert alert-success">
                  import org.slf4j.Logger;<br>
                  import org.slf4j.LoggerFactory;<br>
                  import org.apache.felix.scr.annotations.Component;<br>
                  import org.apache.felix.scr.annotations.Service;<br>
                  import org.apache.felix.scr.annotations.Property;<br>
                  @Component<br>
                  @Service(value = Runnable.class)<br>
                  @Property( name = "scheduler.expression", value = "0 * * * * ?")<br>
                  public class ScheduledCronJob implements Runnable {<br>
                  &ensp;&ensp; /** Default log. */<br>
                  &ensp;&ensp; protected final Logger log = LoggerFactory.getLogger(this.getClass());<br>
                  &ensp;&ensp; public void run() {<br>
                  &ensp;&ensp; &ensp; log.info("Executing a cron job (job#1) through the whiteboard pattern");<br>
                  &ensp;}<br>
                  }<br>
                </div>
                <p>Scheduling at periodic times - The following job is executed every ten seconds by setting scheduler.period to 10:</p>
                <div class="alert alert-success">
                  import org.slf4j.Logger;<br>
                  import org.slf4j.LoggerFactory;<br>
                  import org.apache.felix.scr.annotations.Component;<br>
                  import org.apache.felix.scr.annotations.Service;<br>
                  import org.apache.felix.scr.annotations.Property;<br>
                  @Component<br>
                  @Service(value = Runnable.class)<br>
                  @Property( name = "scheduler.period", longValue = 10)<br>
                  public class ScheduledPeriodicJob implements Runnable {<br>
                  &ensp;&ensp; /** Default log. */<br>
                  &ensp;&ensp; protected final Logger log = LoggerFactory.getLogger(this.getClass());<br>
                  &ensp;&ensp; public void run() {<br>
                  &ensp;&ensp; &ensp; log.info("Executing a perodic job (job#2) through the whiteboard pattern");<br>
                  &ensp;}<br>
                  //<br>
                  }<br>
                </div>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse2">2. How to write scheduler by registering the job through the scheduler API?</a></h4>
            </div>
            <div id="collapse2" class="panel-collapse collapse">
              <div class="panel-body">
                <p>We can write a scheduler using Schedular API.</p>
                <div class="alert alert-success">
                  &ensp;@Reference<br>
                  &ensp;private Scheduler scheduler;<br>
                </div><b>Defining the job</b>
                <p>The following code sample defines a job object that writes a message in the logs:</p>
                <div class="alert alert-success">
                  &ensp;final Runnable job = new Runnable() {<br>
                  &ensp;&ensp;&ensp;public void run() {<br>
                  &ensp;&ensp;&ensp;&ensp;log.info("Executing the job");<br>
                  &ensp;&ensp;}<br>
                  &ensp; };
                </div><b>Scheduling with a cron expression</b>
                <p>To execute the job as defined above at 10:15am every Monday, Tuesday, Wednesday, Thursday and Friday, you can use the <b>addJob()</b> method with the following parameters:</p>
                <div class="alert alert-success">
                  String schedulingExpression = "0 15 10 ? * MON-FRI";<br>
                  this.scheduler.addJob("myJob", job, null, schedulingExpression, true);
                </div><b>Scheduling at periodic times</b>
                <p>To execute the job as defined above every 3 minutes (180 seconds), you can use the <b>addPeriodicJob()</b> method with the following parameters:</p>
                <div class="alert alert-success">
                  long period = 3*60; //the period is expressed in seconds<br>
                  this.scheduler.addPeriodicJob("myJob", job, null, period, true);<br>
                </div><b>Scheduling at a given time</b>
                <p>To execute the job as defined above at a specific date (on January 10th 2020), you can use the <b>fireJobAt()</b> method with the following parameters:</p>
                <div class="alert alert-success">
                  SimpleDateFormat formatter = new SimpleDateFormat("yyyy/MM/dd");<br>
                  String date = "2020/01/10";<br>
                  java.util.Date fireDate = formatter.parse(date);<br>
                  this.scheduler.fireJobAt("myJob", job, null, fireDate);<br>
                </div>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse3">3. What are methods present in scheduler api?</a></h4>
            </div>
            <div id="collapse3" class="panel-collapse collapse">
              <div class="panel-body">
                http://sling.apache.org/apidocs/sling6/org/apache/sling/commons/scheduler/Scheduler.html
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="container-fluid text-center">
      <p>Please send your queries or suggestions at aeminterviewquestions@gmail.com(Abhinash Kumar Singh)</p>
    </footer>
  </div>
</body>
</html>
